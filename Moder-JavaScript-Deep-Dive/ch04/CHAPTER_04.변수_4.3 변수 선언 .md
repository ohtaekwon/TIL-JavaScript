#  _CHAPTER 04_

###  :pencil: ***변수***

<br>

### :page_facing_up: 4.3. 변수 선언

---

**변수 선언(variable declaration)** 이란 변수를 생성하는 것을 말한다.

​	값을 저장하기 위해 메모리 공간을 **확보(allocate)** 하고 변수 이름과 확보된 메모리 공간의 주소를 **연결(name binding)** 해서 값을 저장할 수 있게 준비하는 것.

변수 선언에 의해 확보된 메모리 공간은 확보가 **해제(release)** 되기 전까지는 누구도 확보된 메모리 공간을 사용할 수 없도록 보호되므로 안전하게 사용할 수 있다.

**변수를 사용하려면 반드시 선언이 필요하다.**  **변수를 선언할 때는`var`, `let`, `const` 키워드를 사용한다.** `ES6` 에서 `let`, `const` 키워드가 도입되기 이전까지 `var` 키워드는 자바스크립트에서 변수를 선언할 수 있는 유일한 키워드였다.

<br>

#### :file_folder: `ES5` VS. `ES6`

- `var` 키워드는 여러 **단점** 이 있다. `var` 키워드의 여러 단점 중에서 가장 대표적인 것은 **블록 스코프(block-level-scope)** 를 지원하지 않고 **함수 레벨 스코프(fucntion-level-scope)** 를 지원한다.

  - 이로 인해 의도치 않게 **전역 변수**가 선언되어 심각한 부작용이 발생한다.

- `ES6` 에서 `let`과 `const`키워드를 도입한 이유는 `var` 키워드의 여러 단점을 보완하기 위해서다.

- `ES5`와 `ES6` 는 서로 상관없는 별대의 사양이 아니다. `ES6` 이전 사양으로 구현된 코드는 `ES6` 기반의 자바스크립트 엔진에서 모두 정상적으로 동작한다.

  - **즉, `ES6` 는 기본적으로 하위 호환성을 유지하면서 `ES5`의 기반 위에 새로운 기능을 추가한 것이다.**
  - **다시말해, `ES6` 는 `ES5`의 상위 집합(superset)** 이다.

<br>

#### _var 키워드 뒤에 오는 변수_

```javascript
var score; // 변수 선언(변수 선언문)
```

<br>

#### :file_folder: 1) 키워드

키워드 자바스크릅티 코드를 해석하고 실행하는 자바스크립트 엔진이 수행할 동작을 규정한 일종의 명령어다.
자바스크립트 엔진은 키워드를 만나면 자신이 수행해야 할 약속된 동작을 수행한다.
예를 들어, `var` 키워드를 만나면 자바스크립트 엔진은 뒤에 오는 **변수 이름** 으로 새로운 변수를 선언한다.

변수을 선언한 이후, 아직 변수에 값을 할당하지 않았다. 

- 따라서, 변수 선언에 의해 확보된 **메모리 공간** 은 비어있을 것을 생각할 수 있으나 확보된 메모리 공간에는 자바스크립트 엔진에 의해 `undefined` 라는 값이 암묵적으로 할당되어 초기화된다.

```javascript
console.log(score);			// undefined
```

<br>

#### :file_folder: 2) undefined

`undefined`는 자바스크립트에서 제공하는 **원시 타입의 값(primitive value)** 이다. 

자바스크립트 엔진은 변수 선언을 다음과 같은 2단계에 거쳐 수행한다.

- 선언 단계 : 변수 이름을 등록해서 자바스크립트 엔진에 변수의 존재를 알린다.
- 초기화 단계 : 값을 저장하기 위해 메모리 공간을 확보하고 암묵적으로 `undefined`를 할당해 초기화한다.

<br>

#### :file_folder: 3) 변수 이름은 어디에 등록되는가?

변수 이름을 비롯한 모든 식별자는 실행 컨텍스트에 등록된다. 

- **실행 컨텍스트(execution context)** 는 자바스크립트 엔진이 소스코드를 평가하고 실행하기 위해 필요한 환경을 제공하고 코드의 실행 결과를 실제로 관리하는 영역이다. 
- 자바스크립트 엔진은 **실행 컨텍스트** 를 통해 `식별자`와 `스코프`를 관리한다.

변수 이름과 변수 값을 실행 컨텍스트 내에 `키/값` 형식인 `객체`로 등록되어 관리한다. 

<br>

`var` 키워드를 사용한 변수 선언은 **선언 단계** 와 **초기화 단계** 가 동시에 진행된다. `var score;` 는 선언단계를 통해 변수 이름 `score`를 등록하고, 초기화 단계를 통해 `score` 변수에 암묵적으로 `undefined`를 할당해 초기화 한다. 

일반적으로 **초기화(initaliazation)** 란 변수가 선언된 이후 최초로 값을 할당하는 것을 말한다.  `var` 키워드로 선언한 변수는 `undefined`로 암묵적인 초기화가 자동 수행된다. 따라서, `var`키워드로 선언한 변수는 어떠한 값도 할당하지 않아도 `undefined` 라는 값을 갖느다.

만약 **초기화 단계** 를 거치지 않으면 확보된 메모리 공간에는 이전에 다른 애플리케이션이 사용했던 값이 남아 있을 수 있다.

- 이러한 값을 **쓰레기 값(garbage value)** 라 한다.

따라서, 메모리 공간을 확보한 다음, 값을 할당하지 않은 상태에서 곧바로 변수 값을 참조하면 쓰레기 값이 나올 수 있다. 자바스크립트의 `var` 키워드는 암묵적으로 초기화를 수행하므로 이러한 위험으루부터 안전한다.

변수를 사용하려면 반드시 **선언** 이 필요하다. 변수뿐만 아니라 모든 **식별자** (함수, 클래스 등)가 그렇다. 만약 선언하지 않은 식별자에 접근하면 **ReferenceError(참조에러)** 가 발생한다.

**ReferenceError** 는 식별자를 통해 값을 참조하려 했지만 자바스크립트 엔진이 등록된 식별자를 찾을 수 없을 때 발생하는 에러이다.
